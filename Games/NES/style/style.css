:root { --primary: #3b82f6; --bg: #000; --panel: #1e293b; --text: #f8fafc; }
body { margin: 0; font-family: sans-serif; background: var(--bg); color: var(--text); overflow: hidden; touch-action: none; -webkit-user-select: none; user-select: none; }
#top-bar, #edit-bar {
position: fixed; top: 0; width: 100%; height: 50px; background: rgba(15, 23, 42, 0.95);
backdrop-filter: blur(10px); display: flex; justify-content: space-between; align-items: center;
padding: 0 16px; z-index: 2001; box-sizing: border-box; border-bottom: 1px solid #334155;
transition: transform 0.3s ease;
}
#top-bar.hidden { transform: translateY(-100%); }
#edit-bar { display: none; background: #1e40af; border-bottom: 2px solid #fff; }
.btn-ui { padding: 8px 16px; border: none; border-radius: 6px; background: var(--primary); color: #fff; cursor: pointer; font-size: 0.8rem; font-weight: bold; }

#show-menu-btn {
  position: fixed;
  top: 0px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 25px;
  background: rgba(59, 130, 246, 0.9);
  border: none;
  border-radius: 0 0 8px 8px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  z-index: 2000;
  display: none;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

#emulator-container { position: fixed; inset: 0; display: flex; justify-content: center; align-items: center; z-index: 1; }
#overlay-buttons { position: fixed; inset: 0; pointer-events: none; z-index: 1000; }

.ctrl-element { position: absolute; pointer-events: auto; touch-action: none; }
.overlay-btn {
background: rgba(255, 255, 255, 0.2); color: white; font-weight: bold;
display: flex; align-items: center; justify-content: center;
box-shadow: 0 4px 10px rgba(0,0,0,0.3); backdrop-filter: blur(4px); border-radius: 50%;
transition: transform 0.05s, background 0.05s; border: 2px solid transparent;
}

.active-press { background: rgba(59, 130, 246, 0.8) !important; transform: scale(0.9) !important; border-color: #fff !important; }
.auto-on { border-color: #ef4444 !important; background: rgba(239, 68, 68, 0.3) !important; }

.dpad { display: grid; grid-template-columns: repeat(3, 50px); grid-template-rows: repeat(3, 50px); gap: 2px; }
.dpad div { width: 50px; height: 50px; background: rgba(255,255,255,0.15); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }
.active-dir { background: var(--primary) !important; transform: scale(0.95); }

#analog { width: 120px; height: 120px; border-radius: 50%; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2); }
#analog-stick { width: 50px; height: 50px; border-radius: 50%; background: var(--primary); position: absolute; left: 35px; top: 35px; pointer-events: none; }

#modal-settings { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.85); z-index: 3000; }
.modal-content { background: var(--panel); padding: 24px; border-radius: 16px; width: 85%; max-width: 350px; position: relative; }
.setting-item { margin: 15px 0; display: flex; justify-content: space-between; align-items: center; }

.toggle-btn { padding: 6px 12px; border-radius: 4px; border: 1px solid #475569; background: #334155; color: white; cursor: pointer; min-width: 60px; }
.toggle-active { background: #ef4444; border-color: #b91c1c; }

#turbo-a, #turbo-b {
width: 65px !important;
height: 65px !important;
font-size: 0.65rem;
}

#loading-overlay, #error-overlay {
position: fixed; inset: 0; background: rgba(0,0,0,0.9);
display: none; align-items: center; justify-content: center; flex-direction: column;
color: white; font-size: 1.5rem; z-index: 5000; text-align: center; padding: 20px;
}
#loading-overlay p { margin-bottom: 30px; }
.spinner {
width: 60px; height: 60px; border: 6px solid #f3f3f3; border-top: 6px solid var(--primary);
border-radius: 50%; animation: spin 1s linear infinite;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

#error-overlay button {
margin-top: 30px; padding: 12px 24px; background: var(--primary); border: none;
border-radius: 8px; color: white; font-size: 1rem; cursor: pointer;
}

#rom-select-overlay {
position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none;
align-items: center; justify-content: center; flex-direction: column;
color: white; font-size: 1.5rem; z-index: 5000; text-align: center; padding: 20px;
}
#rom-select-overlay p { margin-bottom: 30px; }
#rom-select-overlay button {
margin: 10px; padding: 15px 30px; background: var(--primary); border: none;
border-radius: 8px; color: white; font-size: 1.1rem; cursor: pointer;
}

#settings-main, #keyboard-edit-panel { width: 100%; }
#keyboard-edit-panel { display: none; }

.styled-select {
  background: #334155;
  color: white;
  border: 1.5px solid #475569;
  border-radius: 6px;
  padding: 6px 28px 6px 12px;
  font-size: 1rem;
  outline: none;
  appearance: none;
  min-width: 115px;
  box-shadow: 0 2px 6px rgba(16,24,40,0.05);
}
.styled-select option {
  color: #111;
  background: #f1f5f9;
}

#remap-overlay {
position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none;
align-items: center; justify-content: center; z-index: 4000; flex-direction: column;
}
#remap-overlay .inner {
background: var(--panel); padding: 30px; border-radius: 16px; text-align: center; max-width: 80%;
}
#remap-text { font-size: 1.2rem; margin-bottom: 20px; white-space: pre-line; }

#fps-display {
position: fixed; top: 60px; right: 10px; color: #fff; background: rgba(0,0,0,0.6);
padding: 6px 12px; border-radius: 8px; font-size: 0.9rem; font-weight: bold;
z-index: 2000; display: none; pointer-events: none;
}